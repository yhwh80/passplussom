<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Dashboard - Pass Plus SOM</title>
    
    <!-- PWA Meta -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <!-- SEO Meta -->
    <meta name="description" content="Manage your driving lessons, view booking history, and track your progress.">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/icons/favicon.svg">
</head>
<body>
    <!-- Navigation -->
    <header class="header">
        <nav class="nav container">
            <div class="nav-brand">
                <a href="index.html">
                    <img src="assets/icons/logo.svg" alt="Pass Plus SOM" class="nav-logo">
                    <span class="nav-title">Pass Plus SOM</span>
                </a>
            </div>
            
            <div class="nav-menu" id="nav-menu">
                <a href="index.html" class="nav-link">Book Lessons</a>
                <a href="#" class="nav-link active">Dashboard</a>
            </div>
            
            <div class="nav-actions">
                <button class="btn btn-ghost" id="notifications-btn">
                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span class="notification-badge" id="notification-count">3</span>
                </button>
                <div class="user-menu">
                    <button class="user-button" id="user-button">
                        <img src="assets/icons/default-avatar.svg" alt="Profile" class="user-avatar" id="user-avatar">
                        <span class="user-name" id="user-name">John Smith</span>
                        <svg class="user-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <polyline points="6,9 12,15 18,9"></polyline>
                        </svg>
                    </button>
                    <div class="user-dropdown" id="user-dropdown">
                        <a href="#profile" class="dropdown-item">My Profile</a>
                        <a href="#settings" class="dropdown-item">Settings</a>
                        <a href="#help" class="dropdown-item">Help</a>
                        <div class="dropdown-divider"></div>
                        <button class="dropdown-item" id="logout-btn">Logout</button>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Dashboard Header -->
        <section class="dashboard-header">
            <div class="container">
                <div class="welcome-section">
                    <h1 class="welcome-title">Welcome back, <span id="welcome-name">John</span>!</h1>
                    <p class="welcome-subtitle">Manage your driving lessons and track your progress</p>
                </div>
                
                <div class="quick-actions">
                    <a href="book-lesson.html" class="btn btn-primary">
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M12 5v14m-7-7h14"/>
                        </svg>
                        Book New Lesson
                    </a>
                    <button class="btn btn-outline" id="emergency-contact">
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                        </svg>
                        Emergency Contact
                    </button>
                </div>
            </div>
        </section>

        <!-- Dashboard Content -->
        <section class="dashboard-content">
            <div class="container">
                <div class="dashboard-grid">
                    <!-- Next Lesson Card -->
                    <div class="dashboard-card next-lesson-card">
                        <div class="card-header">
                            <h2 class="card-title">Next Lesson</h2>
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                        </div>
                        
                        <div class="next-lesson-content" id="next-lesson-content">
                            <!-- Dynamic content -->
                        </div>
                    </div>

                    <!-- Progress Card -->
                    <div class="dashboard-card progress-card">
                        <div class="card-header">
                            <h2 class="card-title">Learning Progress</h2>
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <polyline points="22,4 12,14.01 9,11.01"/>
                            </svg>
                        </div>
                        
                        <div class="progress-content">
                            <div class="progress-stats">
                                <div class="stat-item">
                                    <div class="stat-number" id="total-lessons">8</div>
                                    <div class="stat-label">Total Lessons</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="hours-completed">12</div>
                                    <div class="stat-label">Hours Completed</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number" id="test-readiness">75%</div>
                                    <div class="stat-label">Test Ready</div>
                                </div>
                            </div>
                            
                            <div class="progress-bar-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 75%"></div>
                                </div>
                                <span class="progress-text">Ready for test in ~6 more hours</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="dashboard-card stats-card">
                        <div class="card-header">
                            <h2 class="card-title">This Month</h2>
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <line x1="18" y1="20" x2="18" y2="10"/>
                                <line x1="12" y1="20" x2="12" y2="4"/>
                                <line x1="6" y1="20" x2="6" y2="14"/>
                            </svg>
                        </div>
                        
                        <div class="stats-grid">
                            <div class="stat-box">
                                <div class="stat-value" id="lessons-this-month">4</div>
                                <div class="stat-name">Lessons</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value" id="spent-this-month">Â£140</div>
                                <div class="stat-name">Spent</div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="dashboard-card activity-card">
                        <div class="card-header">
                            <h2 class="card-title">Recent Activity</h2>
                            <button class="btn btn-ghost btn-sm" id="view-all-activity">View All</button>
                        </div>
                        
                        <div class="activity-list" id="activity-list">
                            <!-- Dynamic content -->
                        </div>
                    </div>

                    <!-- Upcoming Lessons -->
                    <div class="dashboard-card lessons-card">
                        <div class="card-header">
                            <h2 class="card-title">Upcoming Lessons</h2>
                            <button class="btn btn-ghost btn-sm" id="manage-lessons">Manage</button>
                        </div>
                        
                        <div class="lessons-list" id="upcoming-lessons">
                            <!-- Dynamic content -->
                        </div>
                    </div>

                    <!-- Notifications -->
                    <div class="dashboard-card notifications-card">
                        <div class="card-header">
                            <h2 class="card-title">Notifications</h2>
                            <button class="btn btn-ghost btn-sm" id="mark-all-read">Mark All Read</button>
                        </div>
                        
                        <div class="notifications-list" id="notifications-list">
                            <!-- Dynamic content -->
                        </div>
                    </div>
                </div>

                <!-- Secondary Content -->
                <div class="dashboard-secondary">
                    <!-- Learning Resources -->
                    <div class="dashboard-card resources-card">
                        <div class="card-header">
                            <h2 class="card-title">Learning Resources</h2>
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                            </svg>
                        </div>
                        
                        <div class="resources-list">
                            <a href="#" class="resource-item">
                                <div class="resource-icon">ð</div>
                                <div class="resource-content">
                                    <h4>Highway Code</h4>
                                    <p>Essential rules and guidance</p>
                                </div>
                            </a>
                            
                            <a href="#" class="resource-item">
                                <div class="resource-icon">ð§ </div>
                                <div class="resource-content">
                                    <h4>Theory Test Practice</h4>
                                    <p>Mock tests and hazard perception</p>
                                </div>
                            </a>
                            
                            <a href="#" class="resource-item">
                                <div class="resource-icon">ð¥</div>
                                <div class="resource-content">
                                    <h4>Driving Videos</h4>
                                    <p>Instructional driving content</p>
                                </div>
                            </a>
                            
                            <a href="#" class="resource-item">
                                <div class="resource-icon">ð</div>
                                <div class="resource-content">
                                    <h4>Lesson Notes</h4>
                                    <p>Your instructor's feedback</p>
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- Support Section -->
                    <div class="dashboard-card support-card">
                        <div class="card-header">
                            <h2 class="card-title">Need Help?</h2>
                            <svg class="card-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                                <point cx="12" cy="17"/>
                            </svg>
                        </div>
                        
                        <div class="support-options">
                            <button class="support-option" id="contact-instructor">
                                <svg class="support-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                                </svg>
                                Contact Instructor
                            </button>
                            
                            <button class="support-option" id="live-chat">
                                <svg class="support-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                                </svg>
                                Live Chat
                            </button>
                            
                            <button class="support-option" id="faq">
                                <svg class="support-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                                    <point cx="12" cy="17"/>
                                </svg>
                                FAQ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modals -->
    <div id="modal-overlay" class="modal-overlay">
        <!-- Profile Modal -->
        <div class="modal" id="profile-modal">
            <div class="modal-header">
                <h3 class="modal-title">My Profile</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form class="profile-form" id="profile-form">
                    <div class="form-group">
                        <label for="profile-first-name">First Name</label>
                        <input type="text" id="profile-first-name" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="profile-last-name">Last Name</label>
                        <input type="text" id="profile-last-name" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="profile-email">Email</label>
                        <input type="email" id="profile-email" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="profile-phone">Phone</label>
                        <input type="tel" id="profile-phone" class="form-input">
                    </div>
                    
                    <div class="form-group">
                        <label for="profile-postcode">Postcode</label>
                        <input type="text" id="profile-postcode" class="form-input">
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn btn-ghost modal-cancel">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Lesson Details Modal -->
        <div class="modal" id="lesson-modal">
            <div class="modal-header">
                <h3 class="modal-title">Lesson Details</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="lesson-modal-body">
                <!-- Dynamic content -->
            </div>
        </div>

        <!-- Cancel Lesson Modal -->
        <div class="modal" id="cancel-modal">
            <div class="modal-header">
                <h3 class="modal-title">Cancel Lesson</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to cancel this lesson?</p>
                <div class="cancellation-policy">
                    <h4>Cancellation Policy</h4>
                    <ul>
                        <li>Free cancellation up to 24 hours before</li>
                        <li>50% charge for cancellations within 24 hours</li>
                        <li>Full charge for cancellations within 2 hours</li>
                    </ul>
                </div>
                
                <div class="form-group">
                    <label for="cancel-reason">Reason for cancellation (optional)</label>
                    <textarea id="cancel-reason" class="form-textarea" rows="3"></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-ghost modal-cancel">Keep Lesson</button>
                    <button type="button" class="btn btn-danger" id="confirm-cancel">Cancel Lesson</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/supabase.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>